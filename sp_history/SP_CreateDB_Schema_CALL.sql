DELIMITER $$
USE `gt_gw_main`$$
DROP PROCEDURE IF EXISTS `SP_CreateDB_LTE`$$
CREATE DEFINER=`covmo`@`%` PROCEDURE `SP_CreateDB_Schema_CALL`(IN GT_DB VARCHAR(100))
BEGIN
	DECLARE TABLE_CALL_COL_STR VARCHAR(12000) DEFAULT 
		'
				`CALL_ID` BIGINT(20) UNSIGNED DEFAULT NULL,
				`RAB_SEQ_ID` TINYINT(4) UNSIGNED DEFAULT NULL,
				`START_TIME` DATETIME DEFAULT NULL,
				`START_TIME_MS` MEDIUMINT(9) DEFAULT NULL,
				`END_TIME` DATETIME DEFAULT NULL,
				`END_TIME_MS` MEDIUMINT(9) DEFAULT NULL,
				`RRC_CONNECT_DURATION` BIGINT(20) DEFAULT NULL,
				`FIRST_EVENT_ID` MEDIUMINT(9) DEFAULT NULL,
				`LAST_EVENT_ID` MEDIUMINT(9) DEFAULT NULL,
				`IMSI` VARCHAR(20) DEFAULT NULL,
				`IMEI` VARCHAR(20) DEFAULT NULL,
				`S_RNTI` VARCHAR(15) DEFAULT NULL,
				`LAC` MEDIUMINT(9) DEFAULT NULL,
				`LAC_OLD` MEDIUMINT(9) DEFAULT NULL,
				`RAC` VARCHAR(10) DEFAULT NULL,
				`RAC_OLD` VARCHAR(10) DEFAULT NULL,
				`START_CELL_ID` VARCHAR(50) DEFAULT NULL,
				`START_RNC_ID` VARCHAR(50) DEFAULT NULL,
				`END_CELL_ID` VARCHAR(50) DEFAULT NULL,
				`END_RNC_ID` VARCHAR(50) DEFAULT NULL,
				`ECNO_RACH` FLOAT DEFAULT NULL,
				`RRC_REQUEST_TYPE` SMALLINT(6) DEFAULT NULL,
				`CALL_TYPE` TINYINT(4) DEFAULT NULL,
				`INITIAL_RAB_CELL_ID` MEDIUMINT(9) DEFAULT NULL,
				`INITIAL_RAB_RNC_ID` MEDIUMINT(9) DEFAULT NULL,
				`IU_RELEASE_CAUSE` MEDIUMINT(9) DEFAULT NULL,
				`IU_RELEASE_REQUEST_CAUSE` MEDIUMINT(9) DEFAULT NULL,
				`SHO` SMALLINT(6) DEFAULT NULL,
				`SOHO` SMALLINT(6) DEFAULT NULL,
				`IRAT_HHO_ATTEMPT` SMALLINT(6) DEFAULT NULL,
				`IRAT_HHO_SUCCESS` SMALLINT(6) DEFAULT NULL,
				`IRAT_HHO_S_SAI` VARCHAR(20) DEFAULT NULL,
				`IRAT_HHO_T_C_ID` VARCHAR(20) DEFAULT NULL,
				`IRAT_HHO_T_BCCH_ARFCN` SMALLINT(6) DEFAULT NULL,
				`IRAT_HHO_T_NCC_BCC` MEDIUMINT(9) DEFAULT NULL,
				`SRNC_RELOC_ATTEMPT` SMALLINT(6) DEFAULT NULL,
				`SRNC_RELOC_SUCCESS` SMALLINT(6) DEFAULT NULL,
				`SRNC_RELOC_S_RNC_ID` MEDIUMINT(9) DEFAULT NULL,
				`SRNC_RELOC_T_RNC_ID` MEDIUMINT(9) DEFAULT NULL,
				`IRAT_HHO_SRNC_RELOC_CAUSE` MEDIUMINT(9) DEFAULT NULL,
				`IFHO` SMALLINT(6) DEFAULT NULL,
				`RRC_CONN_REJ_CAUSE` MEDIUMINT(9) DEFAULT NULL,
				`RAB_ASSIGN_FAIL_CAUSE` MEDIUMINT(9) DEFAULT NULL,
				`UL_THROUGHPUT_AVG` DOUBLE DEFAULT NULL,
				`UL_THROUGHPUT_MAX` DOUBLE DEFAULT NULL,
				`UL_TRAFFIC_VOLUME` DOUBLE DEFAULT NULL,
				`DL_THROUGHPUT_AVG` DOUBLE DEFAULT NULL,
				`DL_THROUGHPUT_MAX` DOUBLE DEFAULT NULL,
				`DL_TRAFFIC_VOLUME` DOUBLE DEFAULT NULL,
				`CALL_STATUS` TINYINT(4) DEFAULT NULL,
				`VENDOR_DROP_CAUSE` MEDIUMINT(9) DEFAULT NULL,
				`RRC_FAILURE_CNT` MEDIUMINT(9) DEFAULT ''0'',
				`RRC_FAILURE_EVENT_LAST` MEDIUMINT(9) DEFAULT NULL,
				`RRC_FAILURE_CAUSE_LAST` MEDIUMINT(9) DEFAULT NULL,
				`NBAP_FAILURE_CNT` MEDIUMINT(9) DEFAULT ''0'',
				`NBAP_FAILURE_EVENT_LAST` MEDIUMINT(9) DEFAULT NULL,
				`NBAP_FAILURE_CAUSE_LAST` MEDIUMINT(9) DEFAULT NULL,
				`RNSAP_FAILURE_CNT` MEDIUMINT(9) DEFAULT ''0'',
				`RNSAP_FAILURE_EVNET_LAST` MEDIUMINT(9) DEFAULT NULL,
				`RNSAP_FAILURE_CAUSE_LAST` MEDIUMINT(9) DEFAULT NULL,
				`RANAP_FAILURE_CNT` MEDIUMINT(9) DEFAULT ''0'',
				`RANAP_FAILURE_EVENT_LAST` MEDIUMINT(9) DEFAULT NULL,
				`RANAP_FAILURE_CAUSE_LAST` MEDIUMINT(9) DEFAULT NULL,
				`CS_CALL_DURA` MEDIUMINT(9) DEFAULT NULL,
				`CS_RAB_CNT` MEDIUMINT(9) DEFAULT NULL,
				`PS_RAB_CNT` MEDIUMINT(9) DEFAULT NULL,
				`CS_TRAF_CLASS` MEDIUMINT(9) DEFAULT NULL,
				`PS_TRAF_CLASS` MEDIUMINT(9) DEFAULT NULL,
				`PS_DL_TRAN_CH` MEDIUMINT(9) DEFAULT NULL,
				`PS_UL_TRAN_CH` MEDIUMINT(9) DEFAULT NULL,
				`UE_RF_BAND_CAP` VARCHAR(100) DEFAULT NULL,
				`UE_HSDSCH_CATEGORY` MEDIUMINT(9) DEFAULT NULL,
				`UE_EDCH_CATEGORY` MEDIUMINT(9) DEFAULT NULL,
				`LU_FAILURE` TINYINT(4) DEFAULT NULL,
				`RRC_RELEASE_CAUSE` TINYINT(4) DEFAULT NULL,
				`NAS_CAUSE_CC` TINYINT(4) DEFAULT NULL,
				`NAS_CAUSE_SM` TINYINT(4) DEFAULT NULL,
				`NAS_SM` TINYINT(4) DEFAULT NULL,
				`ACCESS_POINT_NAME` VARCHAR(50) CHARACTER SET UTF8 DEFAULT NULL,
				`MCC` CHAR(3) DEFAULT NULL,
				`MNC` VARCHAR(3) DEFAULT NULL,
				`MULTI_RAB` BIGINT(20) DEFAULT NULL,
				`NAS_GPRS_MM_ATTACH` TINYINT(4) DEFAULT NULL,
				`NAS_GPRS_MM_DETACH` TINYINT(4) DEFAULT NULL,
				`IP_ADDRESS` CHAR(15) DEFAULT NULL,
				`UL_THROUGHPUT_EVENT_CNT` MEDIUMINT(9) DEFAULT NULL,
				`DL_THROUGHPUT_EVENT_CNT` MEDIUMINT(9) DEFAULT NULL,
				`SHO_FAILURE` SMALLINT(6) DEFAULT NULL,
				`SOHO_FAILURE` SMALLINT(6) DEFAULT NULL,
				`IFHO_FAILURE` SMALLINT(6) DEFAULT NULL,
				`MULTI_RAB_DROP_INDICATOR` TINYINT(4) DEFAULT NULL,
				`USER_EXPERIENCE_INDICATOR` TINYINT(4) DEFAULT NULL,
				`CALL_SETUP_TIME` MEDIUMINT(9) DEFAULT NULL,
				`CELL_UPDATE_CAUSE` MEDIUMINT(9) DEFAULT NULL,
				`MM_CAUSE` BIGINT(20) DEFAULT NULL,
				`MO_SETUP_FAILURE` TINYINT(4) DEFAULT NULL,
				`MT_SETUP_FAILURE` TINYINT(4) DEFAULT NULL,
				`B_PARTY_NUMBER` VARCHAR(15) DEFAULT NULL,
				`INITIAL_PROPAGATION_DELAY` SMALLINT(6) DEFAULT NULL,
				`AUTH_REQUEST` SMALLINT(6) DEFAULT NULL,
				`AUTH_RESPONSE` SMALLINT(6) DEFAULT NULL,
				`AUTH_FAILURE` SMALLINT(6) DEFAULT NULL,
				`AUTH_REJECT` SMALLINT(6) DEFAULT NULL,
				`LU_REQUEST` SMALLINT(6) DEFAULT NULL,
				`LU_ACCEPT` SMALLINT(6) DEFAULT NULL,
				`LU_REJECT` SMALLINT(6) DEFAULT NULL,
				`AUTH_CIPH_REQUEST` SMALLINT(6) DEFAULT NULL,
				`AUTH_CIPH_RESPONSE` SMALLINT(6) DEFAULT NULL,
				`AUTH_CIPH_FAILURE` SMALLINT(6) DEFAULT NULL,
				`AUTH_CIPH_REJECT` SMALLINT(6) DEFAULT NULL,
				`RAU_REQUEST` SMALLINT(6) DEFAULT NULL,
				`RAU_ACCEPT` SMALLINT(6) DEFAULT NULL,
				`RAU_REJECT` SMALLINT(6) DEFAULT NULL,
				`SECURITY_MODE_ATT` SMALLINT(6) DEFAULT NULL,
				`SECURITY_MODE_SUCCESS` SMALLINT(6) DEFAULT NULL,
				`SECURITY_MODE_REJECT` SMALLINT(6) DEFAULT NULL,
				`PLMN_OLD` MEDIUMINT(9) DEFAULT NULL,
				`PDP_ACTIVATION_REQUEST` SMALLINT(6) DEFAULT NULL,
				`PDP_ACTIVATION_ACCEPT` SMALLINT(6) DEFAULT NULL,
				`PDP_ACTIVATION_REJECT` SMALLINT(6) DEFAULT NULL,
				`PDP_DEACTIVATION_REQUEST` SMALLINT(6) DEFAULT NULL,
				`PDP_DEACTIVATION_ACCEPT` SMALLINT(6) DEFAULT NULL,
				`CSFB_IN_INDICATOR` TINYINT(4) DEFAULT NULL,
				`IRAT_HHO_FAIL` SMALLINT(6) DEFAULT NULL,
				`AMR_CODEC_INDICATOR` VARCHAR(20) DEFAULT NULL,
				`VENDOR_BLOCK_CAUSE` TINYINT(4) DEFAULT NULL,
				`BEST_RSCP_1ST_MR` FLOAT DEFAULT NULL,
				`BEST_ECNO_1ST_MR` FLOAT DEFAULT NULL,
				`IMSI_GROUP_ID` SMALLINT(6) DEFAULT NULL,
				`SMS_IND` SMALLINT(6) DEFAULT NULL,
				`CH_UPSWITCH_FACHTOR99` SMALLINT(6) DEFAULT NULL,
				`CH_UPSWITCH_FACHTOHSPA` SMALLINT(6) DEFAULT NULL,
				`CH_UPSWITCH_R99TOHSPA` SMALLINT(6) DEFAULT NULL,
				`CH_DOWNSWITCH_R99TOFACH` SMALLINT(6) DEFAULT NULL,
				`CH_DOWNSWITCH_HSPATOFACH` SMALLINT(6) DEFAULT NULL,
				`CH_DOWNSWITCH_HSPATOR99` SMALLINT(6) DEFAULT NULL,
				`IU_RELEASE_CAUSE_STR` VARCHAR(100) DEFAULT NULL,
				`RAB_RRC_CAUSE_STR` VARCHAR(150) DEFAULT NULL,
				`IMEI_NEW` VARCHAR(20) DEFAULT NULL,
				`APN` SMALLINT(6) DEFAULT NULL,
				`MAKE_ID` SMALLINT(6) DEFAULT NULL,
				`MODEL_ID` MEDIUMINT(9) DEFAULT NULL,
				`TMSI_PTMSI` VARCHAR(8) DEFAULT NULL,
				`RAB_TYPE` VARCHAR(30) DEFAULT NULL,
				`RAB_DL_MBR` INT(11) DEFAULT NULL,
				`RAB_RESPONSE_TIME` SMALLINT(6) DEFAULT NULL,
				`RAB_UL_MBR` INT(11) DEFAULT NULL,
				`MT_MO_INDICATOR` TINYINT(4) DEFAULT NULL,
				`A_GPS_SUPPORT` TINYINT(4) DEFAULT NULL,
				`MDT_FLAG` TINYINT(4) DEFAULT NULL,
				`REF_ID` VARCHAR(50) DEFAULT NULL,
				`BATCH` SMALLINT(6) UNSIGNED DEFAULT NULL,
				`PU_ID` SMALLINT(6) UNSIGNED DEFAULT NULL,
				`DATA_DATE` DATE DEFAULT NULL,
				`DATA_HOUR` TINYINT(4) DEFAULT NULL,	
				`MOVING` TINYINT(4) DEFAULT NULL,
				`INDOOR` TINYINT(4) DEFAULT NULL,
				`POS_INDOOR_CONFIDENCE` FLOAT DEFAULT NULL,
				`POS_INDOOR_GAIN` FLOAT DEFAULT NULL,
				`POS_FIRST_RNC` MEDIUMINT(9) DEFAULT NULL,
				`POS_FIRST_CELL_INDOOR` TINYINT(4) DEFAULT NULL,
				`POS_FIRST_CLUSTER` MEDIUMINT(9) DEFAULT NULL,
				`POS_FIRST_SITE` VARCHAR(20) DEFAULT NULL,
				`POS_FIRST_FREQUENCY` SMALLINT(6) DEFAULT NULL,
				`POS_FIRST_UARFCN` SMALLINT(6) DEFAULT NULL,
				`POS_FIRST_CELL` MEDIUMINT(9) DEFAULT NULL,
				`POS_FIRST_CELL_NAME` VARCHAR(50) CHARACTER SET UTF8 DEFAULT NULL,
				`POS_FIRST_RSCP` FLOAT DEFAULT NULL,
				`POS_FIRST_ECN0` FLOAT DEFAULT NULL,
				`POS_FIRST_LOC` BIGINT(20) DEFAULT NULL,
				`POS_FIRST_LON` FLOAT(9,6) DEFAULT NULL,
				`POS_FIRST_LAT` FLOAT(9,6) DEFAULT NULL,
				`POS_FIRST_ALTITUDE` FLOAT(7,2) DEFAULT NULL,
				`POS_FIRST_TILE` BIGINT(20) DEFAULT NULL,
				`POS_FIRST_CONFIDENCE` TINYINT(4) DEFAULT NULL,
				`POS_LAST_RNC` MEDIUMINT(9) DEFAULT NULL,
				`POS_LAST_CELL_INDOOR` TINYINT(4) DEFAULT NULL,
				`POS_LAST_CLUSTER` MEDIUMINT(9) DEFAULT NULL,
				`POS_LAST_SITE` VARCHAR(20) DEFAULT NULL,
				`POS_LAST_FREQUENCY` SMALLINT(6) DEFAULT NULL,
				`POS_LAST_UARFCN` SMALLINT(6) DEFAULT NULL,
				`POS_LAST_CELL` MEDIUMINT(9) DEFAULT NULL,
				`POS_LAST_CELL_NAME` VARCHAR(50) CHARACTER SET UTF8 DEFAULT NULL,
				`POS_LAST_RSCP` FLOAT DEFAULT NULL,
				`POS_LAST_ECN0` FLOAT DEFAULT NULL,
				`POS_LAST_LOC` BIGINT(20) DEFAULT NULL,
				`POS_LAST_LON` FLOAT(9,6) DEFAULT NULL,
				`POS_LAST_LAT` FLOAT(9,6) DEFAULT NULL,
				`POS_LAST_ALTITUDE` FLOAT(7,2) DEFAULT NULL,
				`POS_LAST_TILE` BIGINT(20) DEFAULT NULL,
				`POS_LAST_CONFIDENCE` TINYINT(4) DEFAULT NULL,
				`POS_UE_RNC` MEDIUMINT(9) DEFAULT NULL,
				`POS_UE_CELL_INDOOR` TINYINT(4) DEFAULT NULL,
				`POS_UE_CLUSTER` MEDIUMINT(9) DEFAULT NULL,
				`POS_UE_SITE` VARCHAR(20) DEFAULT NULL,
				`POS_UE_FREQUENCY` SMALLINT(6) DEFAULT NULL,
				`POS_UE_UARFCN` SMALLINT(6) DEFAULT NULL,
				`POS_UE_CELL` MEDIUMINT(9) DEFAULT NULL,
				`POS_UE_CELL_NAME` VARCHAR(50) CHARACTER SET UTF8 DEFAULT NULL,
				`POS_UE_LOC` BIGINT(20) DEFAULT NULL,
				`POS_UE_TILE` BIGINT(20) DEFAULT NULL,
				`POS_AS_LOC` BIGINT(20) DEFAULT NULL,
				`POS_AS_LON` FLOAT(9,6) DEFAULT NULL,
				`POS_AS_LAT` FLOAT(9,6) DEFAULT NULL,
				`POS_AS1_TILE` BIGINT(20) DEFAULT NULL,
				`POS_AS1_RNC` MEDIUMINT(9) DEFAULT NULL,
				`POS_AS1_CELL_INDOOR` TINYINT(4) DEFAULT NULL,
				`POS_AS1_CLUSTER` MEDIUMINT(9) DEFAULT NULL,
				`POS_AS1_SITE` VARCHAR(20) DEFAULT NULL,
				`POS_AS1_CELL` MEDIUMINT(9) DEFAULT NULL,
				`POS_AS1_CELL_NAME` VARCHAR(50) CHARACTER SET UTF8 DEFAULT NULL,
				`POS_AS1_FREQUENCY` SMALLINT(6) DEFAULT NULL,
				`POS_AS1_UARFCN` SMALLINT(6) DEFAULT NULL,
				`POS_AS1_RSCP` FLOAT DEFAULT NULL,
				`POS_AS1_ECN0` FLOAT DEFAULT NULL,
				`SIMULATED` TINYINT(4) DEFAULT NULL,
				`POS_AS1_OVERFLAG` TINYINT(1) DEFAULT NULL,
				`POS_AS1_OVERSHOOT_DISTANCE` FLOAT DEFAULT NULL,
				`POS_UE_TXP_RNC` MEDIUMINT(9) DEFAULT NULL,
				`POS_UE_TXP_FREQUENCY` SMALLINT(6) DEFAULT NULL,
				`POS_UE_TXP_UARFCN` SMALLINT(6) DEFAULT NULL,
				`POS_UE_TXP_LOC` BIGINT(20) DEFAULT NULL,
				`POS_UE_TXP_TILE` BIGINT(20) DEFAULT NULL,
				`POS_UE_TXP_QUALITY_VALUE` DOUBLE DEFAULT NULL,
				`POS_UL_SIR_RNC` MEDIUMINT(9) DEFAULT NULL,
				`POS_UL_SIR_FREQUENCY` SMALLINT(6) DEFAULT NULL,
				`POS_UL_SIR_UARFCN` SMALLINT(6) DEFAULT NULL,
				`POS_UL_SIR_LOC` BIGINT(20) DEFAULT NULL,
				`POS_UL_SIR_LON` FLOAT(9,6) DEFAULT NULL,
				`POS_UL_SIR_LAT` FLOAT(9,6) DEFAULT NULL,
				`POS_UL_SIR_TILE` BIGINT(20) DEFAULT NULL,
				`POS_UL_SIR_QUALITY_VALUE` DOUBLE DEFAULT NULL,
				`POS_UL_SIR_ERR_RNC` MEDIUMINT(9) DEFAULT NULL,
				`POS_UL_SIR_ERR_FREQUENCY` SMALLINT(6) DEFAULT NULL,
				`POS_UL_SIR_ERR_UARFCN` SMALLINT(6) DEFAULT NULL,
				`POS_UL_SIR_ERR_LOC` BIGINT(20) DEFAULT NULL,
				`POS_UL_SIR_ERR_TILE` BIGINT(20) DEFAULT NULL,	
				`POS_UL_SIR_ERR_QUALITY_VALUE` DOUBLE DEFAULT NULL,
				`POS_IRAT_FAIL_LOC` BIGINT(20) DEFAULT NULL,
				`POS_IRAT_FAIL_TILE` BIGINT(20) DEFAULT NULL,
				`DATA_QUARTER` TINYINT(4) DEFAULT NULL,
				`MOVING_SPEED` FLOAT DEFAULT NULL,
				`MOVING_TYPE` TINYINT(4) DEFAULT NULL,
				`IFHO_CNT` SMALLINT(6) UNSIGNED DEFAULT NULL,
				`POS_FIRST_DEVIATION_LEVEL` INT(11) DEFAULT NULL,
				`POS_LAST_DEVIATION_LEVEL` INT(11) DEFAULT NULL
	';
	SET @SqlCmd=CONCAT('CREATE TABLE ',GT_DB,'.table_call
				(
				',TABLE_CALL_COL_STR,',
				KEY `CALL_ID` (`CALL_ID`),
				KEY `IMSI` (`IMSI`),
				KEY `IX_FIRST_CELL` (`POS_FIRST_CELL`),
				KEY `IX_LAST_CELL` (`POS_LAST_CELL`),
				KEY `IX_AS1_CELL` (`POS_AS1_CELL`),
				KEY `IX_POS_FIRST_LOC` (`POS_FIRST_LOC`),
				KEY `IX_POS_LAST_LOC` (`POS_LAST_LOC`),
				KEY `IX_IMEI` (`IMEI_NEW`),
				KEY `APN` (`ACCESS_POINT_NAME`)
				) ENGINE=MYISAM DEFAULT CHARSET=LATIN1 DELAY_KEY_WRITE=1');
	PREPARE Stmt FROM @SqlCmd;
	EXECUTE Stmt;
	DEALLOCATE PREPARE Stmt; 	
END$$
DELIMITER ;
